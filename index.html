<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- favicon display tags -->
    <link rel="apple-touch-icon" sizes="180x180" href="./assets/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./assets/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./assets/favicons/favicon-16x16.png">
    <link rel="mask-icon" href="./assets/favicons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">

    <title>Digital Tidepool</title>
</head>
<body>
    
        <div class='box'>
            <form action="#" id="gridConfig">
                <label for="green-starting-pop">Inital Population Size of Greens: </label>
                <input class='input-box' type="number" id="green-starting-pop" placeholder='' value="50">
                <br>
                <label for="eater-starting-pop">Inital Population Size of Eaters: </label>
                <input class='input-box' type="number" id="eater-starting-pop" placeholder='' value="2">
                <br>
                <button type="submit" id='config-submission-button'>Populate Grid and Start Sim</button>
            </form>
            <div id="playback-settings">
                <button id='pause' disabled='true'>Pause</button>
                <button id='resume' disabled='true'>Resume</button>
                <button id='reset' disabled='true'>Reset</button> 
                <button id='parameter-button'>Parameters</button> 
                <button id='about'>About</button> 
                
            </div>
            <div id="stats">
                <ul>
                    <li id='timestep'>Timestep: 0</li>
                    <li id='green-pop'>Green Population: 0</li>
                    <li id='eater-pop'>Eater Population: 0</li>
                    <li id='green-eater-ratio'>Green:Eater Ratio: 0</li>
                    <li id='average-eater-generation'>Average Eater Generation: 0</li>
                </ul>   
            </div>
        </div>
        <div id="parameters">
            <div class='content'>
                <h2>Custom Parameters:</h2>
                <form id='parameter-override'>
                    <div class='flexItem' id="green-params">
                        <label for="green-params">Green Parameters:</label>
                        <ul>
                            <li>
                                <div class="tooltip">
                                    <label for="green-growth-rate: ">Growth Rate</label>
                                    <span class="tooltiptext">The rate at which each green reproduces. A value of 1 results in each green reproducing each timestep, a value of zero results in zero reproduction.</span>
                                </div>
                                <input id="green-growth-rate" value="0.04" min="0" max="1" step="0.01" type="number">
                            </li>
                        </ul>
                    </div>
                    <div class='flexItem' id="eater-params">
                        <label for="eater-params">Eater Parameters:</label>
                        <ul>
                            <li>
                                <div class="tooltip">
                                    <label class="tooltip" for="eater-perception">Perception: </label>
                                    <span class="tooltiptext">The number of spaces surrounding an eater that can be scanned for greens</span>
                                </div>
                                <input id="eater-perception" value="4" min='1' max="20" step="1" type="number">
                            </li>
                            <li>
                                <div class="tooltip">
                                    <label class="tooltip" for="eater-lifespan">Lifespan: </label>
                                    <span class="tooltiptext">The number of timesteps an eater will survive before it becomes susceptible to death</span>
                                </div>
                                <input id="eater-lifespan" value="250" min="10" max="1000" step="1" type="number">
                            </li>
                            <li>
                                <div class="tooltip">
                                    <label class="tooltip" for="eater-death-rate">Death Rate: </label>
                                    <span class="tooltiptext">The rate at which an eater past its lifespan will die. A value of 1 means instant death once lifespan is met. A value of zero means the lifespan will be ignored and the eater will survive indefinitely.</span>
                                </div>
                                <input id="eater-death-rate" value='0.01' min="0" max="1" step="0.01" type="number">
                            </li>
                            <li>
                                <div class="tooltip">
                                    <label class="tooltip" for="eater-reproduction-rate">Reproduction Rate: </label>
                                    <span class="tooltiptext">The rate at which an eater capable of reproducing will undergo division</span>
                                </div>
                                <input id="eater-reproduction-rate" value='0.1'step="0.01" min="0" max="1" type="number">
                            </li>
                            <li>
                                <div class="tooltip">
                                    <label class="tooltip" for="eater-gestation-period">Gestation Period: </label>
                                    <span class="tooltiptext">The number of timesteps an eater must remain stationary before divison is complete</span>
                                </div>
                                <input id="eater-gestation-period" value="50" min='1' max="1000" type="number">
                            </li>
                            <li>
                                <div class="tooltip">
                                    <label for="eater-nutrient-requirement">Reproduction Cost: </label>
                                    <span class="tooltiptext">The number of greens each eater must consume to reproduce</span>
                                </div>
                                <input id="eater-nutrient-requirement" value="50" min="1" max="1000" type="number">
                            </li>
                        </ul>
                    </div>
                    <div class='flexItem'>
                        <button id="set-params-default" type="submit">Reset Default Values</button>
                        <p>Mouse over parameters for more information on how they influence the simulation</p>
                        <p>To see your parameter changes take effect, click "Populate Grid and Start Sim"</p>
                        
                        <p>Warning: Setting parameters to their upper limits will likely result in performance issues</p>
                    </div>
                </form>
            </div>
        </div>
        <div id="guide">
            <div class='content'>
                <h2>Welcome to the Digital Tidepool</h2>

                <p>
                    The digital tidepool is a cellular simulation that takes place entirely in your browser. Based on a set of inital parameters, the simulation
                    will run its course to completion. As an observer of the tidepool, you have the power to choose the starting values of different parameters that
                     influence the development of the environment.
                    <br>
                    <br>
                    There are two forces at odds in the tidepool: Greens and Eaters. 
                    <br>
                    <br>
                    Greens act as the foundation of the ecosystem. They might be some kind of mold, maybe bacteria, maybe slime, maybe code.
                    It's difficult to say for sure. What we do know however is that like most living things, the Greens seek to grow and expand their 
                    dominance over their environment. Given the opportunity, they will not hesistate to develop into the dominant lifeform of the tidepool.
                    <br>
                    <br>
                    Eaters act as the primary consumers of the ecosystem and survive by feeding on the Greens. While they may be short lived, their ability to
                    undergo asexual reproduction makes them a powerful check on the Greens power in the tidepool - A single Eater allowed to reproduce has the
                    potential to devestate the Green population... an act which may doom the Eaters themselves. 
                    <br> 
                    <br>
                    Eaters undergoing reproduction will remain stationary and adopt a dark blue shade. Desceased Eaters appear as a faded white husk of their original forms.
                    <br>
                    <br>
                    Under the "Parameters" tab, you can find several different parameters available to customize, as well as the starting populations of each species in the tidepool.
                </p>
                <p>This project was inspired heavily by the  
                    <a href="https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life">Game of Life</a>,
                    created by the late John Conway. The game of life is a no-player game where a simple set of rules
                     and starting conditions lead to complex and unpredicable interactions downstream. If you're interested in the developmental process behind
                     this project, visit <a href="https://tracedelange.github.io/">my blog</a>. If you'd like access to the source code for the Digital Tidepool, you can find the github repository <a href="https://github.com/tracedelange/digital-tidepool">here</a>.
                    </p>
                    <img width="340vw" src="./assets/images/eater-lovey.png">
                    <p>Thank you very much for stopping by!</p>
            </div>
        </div>
        <div id="canvas">

        </div>
        
        <link rel="stylesheet" href="assets/css/style.css">
        <script src="javascripts/pixi.min.js"></script>
        <script src="javascripts/globals.js"></script>
        <script src="javascripts/cookies.js"></script>
        <script src="javascripts/models/green.js"></script>
        <script src="javascripts/models/eater.js"></script>
        <script src="javascripts/index.js"></script>
    </body>
</html>